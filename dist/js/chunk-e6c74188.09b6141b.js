(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e6c74188"],{"1dde":function(o,e,t){var s=t("d039"),r=t("b622"),a=r("species");o.exports=function(o){return!s((function(){var e=[],t=e.constructor={};return t[a]=function(){return{foo:1}},1!==e[o](Boolean).foo}))}},"65f0":function(o,e,t){var s=t("861d"),r=t("e8b5"),a=t("b622"),l=a("species");o.exports=function(o,e){var t;return r(o)&&(t=o.constructor,"function"!=typeof t||t!==Array&&!r(t.prototype)?s(t)&&(t=t[l],null===t&&(t=void 0)):t=void 0),new(void 0===t?Array:t)(0===e?0:e)}},"68fa":function(o,e,t){},8418:function(o,e,t){"use strict";var s=t("c04e"),r=t("9bf2"),a=t("5c6c");o.exports=function(o,e,t){var l=s(e);l in o?r.f(o,l,a(0,t)):o[l]=t}},"93dd":function(o,e,t){"use strict";var s=t("68fa"),r=t.n(s);r.a},a434:function(o,e,t){"use strict";var s=t("23e7"),r=t("23cb"),a=t("a691"),l=t("50c4"),n=t("7b0b"),i=t("65f0"),d=t("8418"),c=t("1dde"),g=Math.max,m=Math.min,u=9007199254740991,p="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!c("splice")},{splice:function(o,e){var t,s,c,f,b,h,v=n(this),F=l(v.length),k=r(o,F),x=arguments.length;if(0===x?t=s=0:1===x?(t=0,s=F-k):(t=x-2,s=m(g(a(e),0),F-k)),F+t-s>u)throw TypeError(p);for(c=i(v,s),f=0;f<s;f++)b=k+f,b in v&&d(c,f,v[b]);if(c.length=s,t<s){for(f=k;f<F-s;f++)b=f+s,h=f+t,b in v?v[h]=v[b]:delete v[h];for(f=F;f>F-s+t;f--)delete v[f-1]}else if(t>s)for(f=F-s;f>k;f--)b=f+s-1,h=f+t-1,b in v?v[h]=v[b]:delete v[h];for(f=0;f<t;f++)v[f+k]=arguments[f+2];return v.length=F-s+t,c}})},c40e:function(o,e,t){"use strict";t.d(e,"a",(function(){return r})),t.d(e,"d",(function(){return a})),t.d(e,"c",(function(){return l})),t.d(e,"b",(function(){return n}));var s=t("b775"),r=function(o){return s["a"].post("/goods/goodsadd",o)},a=function(o){return s["a"].get("/goods/goodslist",o)},l=function(o){return s["a"].post("/goods/goodsedit",o)},n=function(o){return s["a"].get("/goods/goodsdel",o)}},e16d:function(o,e,t){"use strict";t.r(e);var s=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"goodsedit"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[o._v("添加商品")])]),t("el-form",{ref:"goodsForm",attrs:{model:o.goodsForm,"label-width":"80px",rules:o.rules}},[t("el-form-item",{attrs:{label:"商品名称",prop:"goodsname"}},[t("el-input",{model:{value:o.goodsForm.goodsname,callback:function(e){o.$set(o.goodsForm,"goodsname",e)},expression:"goodsForm.goodsname"}})],1),t("el-form-item",{attrs:{label:"商品分类",prop:"goodscategory"}},[t("el-select",{attrs:{placeholder:"请选择商品分类"},model:{value:o.goodsForm.goodscategory,callback:function(e){o.$set(o.goodsForm,"goodscategory",e)},expression:"goodsForm.goodscategory"}},[t("el-option",{attrs:{label:"促销",value:"促销"}}),t("el-option",{attrs:{label:"咖啡",value:"咖啡"}}),t("el-option",{attrs:{label:"热菜",value:"热菜"}}),t("el-option",{attrs:{label:"凉菜",value:"凉菜"}}),t("el-option",{attrs:{label:"饮品",value:"饮品"}}),t("el-option",{attrs:{label:"火锅",value:"火锅"}})],1)],1),t("el-form-item",{attrs:{label:"商品特色",prop:"goodsfeature"}},[t("el-checkbox-group",{model:{value:o.goodsForm.goodsfeature,callback:function(e){o.$set(o.goodsForm,"goodsfeature",e)},expression:"goodsForm.goodsfeature"}},[t("el-checkbox",{attrs:{label:"新品上市",name:"type"}}),t("el-checkbox",{attrs:{label:"第二单半价",name:"type"}}),t("el-checkbox",{attrs:{label:"主打产品",name:"type"}}),t("el-checkbox",{attrs:{label:"火爆产品",name:"type"}}),t("el-checkbox",{attrs:{label:"祖传手艺",name:"type"}}),t("el-checkbox",{attrs:{label:"源自四川",name:"type"}})],1)],1),t("el-form-item",{attrs:{label:"商品图片"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:o.imgApi,"show-file-list":!1,"on-success":o.handleAvatarSuccess,"before-upload":o.beforeAvatarUpload}},[o.goodsForm.imgUrl?t("img",{staticClass:"avatar",attrs:{src:o.getImgApi+o.goodsForm.imgUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t("el-form-item",{attrs:{label:"是否促销",prop:"isPromotion"}},[t("el-radio-group",{model:{value:o.goodsForm.isPromotion,callback:function(e){o.$set(o.goodsForm,"isPromotion",e)},expression:"goodsForm.isPromotion"}},[t("el-radio",{attrs:{label:"促销"}}),t("el-radio",{attrs:{label:"不促销"}})],1)],1),t("el-form-item",{attrs:{label:"食品规格",prop:"goodsstandard"}},[t("el-radio-group",{model:{value:o.goodsForm.goodsstandard,callback:function(e){o.$set(o.goodsForm,"goodsstandard",e)},expression:"goodsForm.goodsstandard"}},[t("el-radio",{attrs:{label:"单规格"},nativeOn:{click:function(e){return o.oClick(e)}}},[o._v("单规格")]),t("el-radio",{attrs:{label:"多规格"},nativeOn:{click:function(e){return o.mClick(e)}}},[o._v("多规格")])],1)],1),o.isShow?o._e():t("el-form-item",{attrs:{label:"包装费"}},[t("el-input-number",{attrs:{type:"small",min:1,label:"包装费"},model:{value:o.goodsForm.packingexpense,callback:function(e){o.$set(o.goodsForm,"packingexpense",e)},expression:"goodsForm.packingexpense"}})],1),o.isShow?t("div",{attrs:{id:"formTable"}},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:o.addMoreStandard}},[o._v("添加规格")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:o.goodsForm.standardTableData}},[t("el-table-column",{attrs:{prop:"goodsstandard",label:"规格"}}),t("el-table-column",{attrs:{prop:"packingexpense",label:"包装费"}}),t("el-table-column",{attrs:{prop:"goodsPrice",label:"价格"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:o._u([{key:"default",fn:function(e){return[t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return o.handleDelete(e.$index,e.row)}}},[o._v("删除")])]}}])})],1)],1):t("el-form-item",{attrs:{label:"价格"}},[t("el-input-number",{attrs:{type:"small",min:20,label:"价格"},model:{value:o.goodsForm.goodsPrice,callback:function(e){o.$set(o.goodsForm,"goodsPrice",e)},expression:"goodsForm.goodsPrice"}})],1),t("el-form-item",{attrs:{label:"商品描述",prop:"goodsdesc"}},[t("el-input",{attrs:{type:"textarea"},model:{value:o.goodsForm.goodsdesc,callback:function(e){o.$set(o.goodsForm,"goodsdesc",e)},expression:"goodsForm.goodsdesc"}})],1),t("el-dialog",{attrs:{title:"添加规格",visible:o.dialogFormVisible,width:"35%"},on:{"update:visible":function(e){o.dialogFormVisible=e}}},[t("el-form",{staticStyle:{width:"100%"},attrs:{model:o.modelForm,size:"small","label-width":"60px"}},[t("el-form-item",{attrs:{label:"规格"}},[t("el-input",{model:{value:o.modelForm.goodsstandard,callback:function(e){o.$set(o.modelForm,"goodsstandard",e)},expression:"modelForm.goodsstandard"}})],1),t("el-form-item",{attrs:{label:"包装费"}},[t("el-input-number",{attrs:{type:"small",min:1,label:"包装费"},model:{value:o.modelForm.packingexpense,callback:function(e){o.$set(o.modelForm,"packingexpense",e)},expression:"modelForm.packingexpense"}})],1),t("el-form-item",{attrs:{label:"价格"}},[t("el-input-number",{attrs:{type:"small",min:20,label:"价格"},model:{value:o.modelForm.goodsPrice,callback:function(e){o.$set(o.modelForm,"goodsPrice",e)},expression:"modelForm.goodsPrice"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:function(e){o.dialogFormVisible=!1}}},[o._v("取 消")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:o.confirmModel}},[o._v("确 定")])],1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:o.onSubmit}},[o._v("保存")])],1)],1)],1)],1)},r=[],a=(t("a434"),t("96cf"),t("89ba")),l=t("c40e"),n={data:function(){return{imgApi:"http://127.0.0.1:3000/goods/upload/",getImgApi:"http://127.0.0.1:3000/upload/goods/",goodsForm:{goodsname:"",goodscategory:"",goodsfeature:[],imgUrl:"",isPromotion:"",goodsstandard:"单规格",packingexpense:5,goodsPrice:20,standardTableData:[{goodsstandard:"默认",packingexpense:5,goodsPrice:20}],goodsdesc:""},isShow:!1,rules:{goodsname:[{required:!0,message:"请输入商品名称",trigger:"blur"}],goodscategory:[{required:!0,message:"请输入商品分类",trigger:"change"}],goodsfeature:[{required:!0,message:"请选择至少1个商品特色",trigger:"change"}],isPromotion:[{required:!0,message:"请选择是否促销",trigger:"change"}],goodsstandard:[{required:!0,message:"请选择食品规格",trigger:"change"}]},dialogFormVisible:!1,modelForm:{goodsstandard:"",packingexpense:0,goodsPrice:20}}},methods:{handleAvatarSuccess:function(o,e){this.goodsForm.imgUrl=o.imgUrl},beforeAvatarUpload:function(o){var e="image/png"===o.type,t="image/jpeg"===o.type,s=o.size/1024/1024<2;return t||e||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),s||this.$message.error("上传头像图片大小不能超过 2MB!"),(e||t)&&s},handleDelete:function(o,e){console.log(o,e),this.goodsForm.standardTableData.splice(o,1)},addMoreStandard:function(){this.dialogFormVisible=!0},confirmModel:function(){this.dialogFormVisible=!1;var o=this.modelForm,e=o.goodsstandard,t=o.packingexpense,s=o.goodsPrice;this.goodsForm.standardTableData.unshift({goodsstandard:e,packingexpense:t,goodsPrice:s}),console.log("modelForm",this.goodsForm.standardTableData),this.modelForm={goodsstandard:"",packingexpense:0,goodsPrice:20}},onSubmit:function(){var o=this;this.$refs.goodsForm.validate(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s,r,a,n,i,d,c,g,m,u,p,f,b,h,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=12;break}return s=o.goodsForm,r=s.id,a=s.goodsname,n=s.goodscategory,i=s.goodsfeature,d=s.imgUrl,c=s.isPromotion,g=s.goodsdesc,m=s.goodsstandard,u=s.packingexpense,p=s.goodsPrice,f=s.standardTableData,b={id:r,goodsname:a,goodscategory:n,goodsfeature:JSON.stringify(i),imgUrl:d,isPromotion:c,goodsdesc:g,standard:"单规格"===m?JSON.stringify([{goodsstandard:m,packingexpense:u,goodsPrice:p}]):JSON.stringify(f)},e.next=5,Object(l["c"])(b);case 5:h=e.sent,v=h.code,h.msg,0===v&&o.$router.push("/home/goodslist"),console.log("obj",v),e.next=14;break;case 12:return console.log("error submit!!"),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e)})));return function(o){return e.apply(this,arguments)}}())},oClick:function(){this.isShow=!1,this.goodsForm.goodsstandard="单规格"},mClick:function(){this.isShow=!0,this.goodsForm.goodsstandard="多规格"}},mounted:function(){var o=JSON.parse(sessionStorage.getItem("goodslist")),e=o.id,t=o.goodsname,s=o.goodscategory,r=o.goodsfeature,a=o.imgUrl,l=o.isPromotion,n=o.standard,i=o.goodsdesc,d=JSON.parse(r);this.goodsForm={id:e,goodsname:t,goodscategory:s,goodsfeature:d,imgUrl:a,isPromotion:l,goodsdesc:i};var c=JSON.parse(n);"单规格"===c[0].goodsstandard?(this.goodsForm.goodsstandard="单规格",this.isShow=!1,this.goodsForm.packingexpense=c[0].packingexpense,this.goodsForm.goodsPrice=c[0].goodsPrice):(this.goodsForm.goodsstandard="多规格",this.isShow=!0,this.goodsForm.standardTableData=c),console.log("isSHow",this.isShow),console.log("goodsfeature",c)}},i=n,d=(t("93dd"),t("2877")),c=Object(d["a"])(i,s,r,!1,null,null,null);e["default"]=c.exports},e8b5:function(o,e,t){var s=t("c6b6");o.exports=Array.isArray||function(o){return"Array"==s(o)}}}]);
//# sourceMappingURL=chunk-e6c74188.09b6141b.js.map