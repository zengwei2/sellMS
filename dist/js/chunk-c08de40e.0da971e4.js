(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c08de40e"],{"1dde":function(e,t,a){var r=a("d039"),s=a("b622"),i=s("species");e.exports=function(e){return!r((function(){var t=[],a=t.constructor={};return a[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"44ef":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s}));var r=function(){return/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{3,6}$/},s=function(){return/^1(3|4|5|6|7|8|9)\d{9}$|^0\d{2,3}-?\d{7,8}$/}},4583:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"shopmanager"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("h3",[e._v("店铺管理")])]),a("div",{staticClass:"card-content"},[a("el-form",{ref:"form",staticStyle:{width:"80%"},attrs:{rules:e.rules,size:"small",model:e.form,"label-width":"120px",disabled:e.isDisabled}},[a("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"商品名称",prop:"shopname"}},[a("el-input",{model:{value:e.form.shopname,callback:function(t){e.$set(e.form,"shopname",t)},expression:"form.shopname"}})],1),a("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"详细地址",prop:"address"}},[a("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),a("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"联系电话",prop:"phone"}},[a("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),a("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"店铺简介",prop:"shopdesc"}},[a("el-input",{model:{value:e.form.shopdesc,callback:function(t){e.$set(e.form,"shopdesc",t)},expression:"form.shopdesc"}})],1),a("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"店铺标语",prop:"slogan"}},[a("el-input",{model:{value:e.form.slogan,callback:function(t){e.$set(e.form,"slogan",t)},expression:"form.slogan"}})],1),a("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"店铺分类",prop:"category"}},[a("el-select",{attrs:{placeholder:"请选择商品分类"},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}},[a("el-option",{attrs:{label:"热销",value:"热销"}}),a("el-option",{attrs:{label:"咖啡",value:"咖啡"}}),a("el-option",{attrs:{label:"热菜",value:"热菜"}}),a("el-option",{attrs:{label:"凉菜",value:"凉菜"}}),a("el-option",{attrs:{label:"饮品",value:"饮品"}}),a("el-option",{attrs:{label:"火锅",value:"火锅"}})],1)],1),a("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"店铺特点",prop:"feature"}},[a("el-checkbox-group",{model:{value:e.form.feature,callback:function(t){e.$set(e.form,"feature",t)},expression:"form.feature"}},[a("el-checkbox",{attrs:{label:"品牌包装",name:"type"}}),a("el-checkbox",{attrs:{label:"蜂鸟专送",name:"type"}}),a("el-checkbox",{attrs:{label:"外卖保",name:"type"}}),a("el-checkbox",{attrs:{label:"准时达",name:"type"}}),a("el-checkbox",{attrs:{label:"开发票",name:"type"}})],1)],1),a("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"配送费"}},[a("el-input-number",{attrs:{type:"small",min:1,label:"配送费"},model:{value:e.form.packingexpense,callback:function(t){e.$set(e.form,"packingexpense",t)},expression:"form.packingexpense"}})],1),a("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"起送价"}},[a("el-input-number",{attrs:{type:"small",min:20,label:"起送价"},model:{value:e.form.minprice,callback:function(t){e.$set(e.form,"minprice",t)},expression:"form.minprice"}})],1),a("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"营业时间",prop:"date"}},[a("el-time-picker",{attrs:{"is-range":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围","value-format":"yyyy/MM/dd HH:mm:ss"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1),a("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"店铺头像"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.imgApi,"show-file-list":!1,"on-success":e.handleAvatarSuccess1,"before-upload":e.beforeAvatarUpload}},[e.form.shopAvatar?a("img",{staticClass:"avatar",attrs:{src:e.getImgApi+e.form.shopAvatar}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"商业许可证"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.imgApi,"show-file-list":!1,"on-success":e.handleAvatarSuccess2,"before-upload":e.beforeAvatarUpload}},[e.form.businessLicenseImg?a("img",{staticClass:"avatar",attrs:{src:e.getImgApi+e.form.businessLicenseImg}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"餐饮服务许可证"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.imgApi,"show-file-list":!1,"on-success":e.handleAvatarSuccess3,"before-upload":e.beforeAvatarUpload}},[e.form.cateringServiceLicenseImg?a("img",{staticClass:"avatar",attrs:{src:e.getImgApi+e.form.cateringServiceLicenseImg}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"活动优惠"}},[a("el-select",{attrs:{placeholder:"请选择活动分类"},on:{change:e.showModel},model:{value:e.form.discount,callback:function(t){e.$set(e.form,"discount",t)},expression:"form.discount"}},[a("el-option",{attrs:{label:"满减优惠",value:"满减优惠"}}),a("el-option",{attrs:{label:"特惠大酬宾",value:"特惠大酬宾"}}),a("el-option",{attrs:{label:"新用户立减",value:"新用户立减"}}),a("el-option",{attrs:{label:"进店领券",value:"进店领券"}})],1)],1),a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.form.tableData,"highlight-current-row":""}},[a("el-table-column",{attrs:{property:"title",label:"活动标题",width:"120"}}),a("el-table-column",{attrs:{property:"name",label:"活动名称",width:"120"}}),a("el-table-column",{attrs:{property:"detail",label:"活动详情",width:"200"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1),a("el-button",{staticClass:"edit",attrs:{type:"primary",size:"small"},on:{click:e.editForm}},[e._v("修改")]),a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.onSubmit}},[e._v("保存")]),a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"activeModel",staticClass:"demo-ruleForm",attrs:{model:e.activeModel,"status-icon":"","label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"请输入活动详情"}},[a("el-input",{attrs:{type:"text"},model:{value:e.activeModel.detail,callback:function(t){e.$set(e.activeModel,"detail",t)},expression:"activeModel.detail"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){return e.getFrom()}}},[e._v("保 存")])],1)],1)],1)])],1)},s=[],i=(a("a434"),a("b0c0"),a("96cf"),a("89ba")),o=(a("c1df"),a("44ef")),l=a("b775"),n=function(e){return l["a"].get("/shop/shopinfo",e)},c=function(e){return l["a"].post("/shop/shopedit",e)},u={data:function(){var e=function(e,t,a){""===t?a(new Error("请输入电话号码")):e.telReg.test(t)?a():a(new Error("请输入正确的手机号码"))};return{imgApi:"http://127.0.0.1:3000/shop/upload",getImgApi:"http://127.0.0.1:3000/upload/shop/",form:{shopname:"",address:"",phone:"",shopdesc:"",slogan:"",category:"",feature:[],packingexpense:1,minprice:20,date:"",shopAvatar:"",businessLicenseImg:"",cateringServiceLicenseImg:"",discount:"",tableData:[]},rules:{shopname:[{required:!0,message:"请输入商品名称",trigger:"blur"}],address:[{required:!0,message:"请输入详细地址",trigger:"blur"}],phone:[{required:!0,validator:e,telReg:Object(o["b"])(),trigger:"blur"}],shopdesc:[{required:!0,message:"请输入店铺简介",trigger:"blur"}],slogan:[{required:!0,message:"请输入店铺标语",trigger:"blur"}],category:[{required:!0,message:"请选择店铺分类",trigger:"change"}],feature:[{required:!0,message:"请选择至少1个商品特点",trigger:"change"}],date:[{required:!0,message:"请输入营业时间",trigger:"change"}]},isDisabled:!0,dialogVisible:!1,activeModel:{title:"",name:"",detail:""}}},methods:{handleAvatarSuccess1:function(e,t){this.form.shopAvatar=e.imgUrl},handleAvatarSuccess2:function(e,t){this.form.businessLicenseImg=e.imgUrl},handleAvatarSuccess3:function(e,t){this.form.cateringServiceLicenseImg=e.imgUrl},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},handleDelete:function(e,t){this.form.tableData.splice(e,1)},showModel:function(){this.dialogVisible=!0;var e=this.form.discount;switch(this.activeModel.name=e,e){case"满减优惠":this.activeModel.title="减";break;case"特惠大酬宾":this.activeModel.title="特";break;case"新用户立减":this.activeModel.title="新";break;case"进店领券":this.activeModel.title="领"}},handleClose:function(e){this.dialogVisible=!1},getFrom:function(){this.dialogVisible=!1,this.form.tableData.unshift(this.activeModel),this.activeModel={title:"",name:"",detail:""}},editForm:function(){this.isDisabled=!1},onSubmit:function(){var e=this;this.$refs.form.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=9;break}return e.isDisabled=!0,r={shopname:e.form.shopname,address:e.form.address,phone:e.form.phone,shopdesc:e.form.shopdesc,slogan:e.form.slogan,category:e.form.category,feature:JSON.stringify(e.form.feature),packingexpense:e.form.packingexpense,minprice:e.form.minprice,date:JSON.stringify(e.form.date),shopAvatar:e.form.shopAvatar,businessLicenseImg:e.form.businessLicenseImg,cateringServiceLicenseImg:e.form.cateringServiceLicenseImg,tableData:JSON.stringify(e.form.tableData)},t.next=5,c(r);case 5:s=t.sent,s.code,t.next=11;break;case 9:return console.log("error submit!!"),t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getShopInfo:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:t=e.sent,a=t.data,this.form={shopname:a.shopname,address:a.address,phone:a.phone,shopdesc:a.shopdesc,slogan:a.slogan,category:a.category,feature:JSON.parse(a.feature),packingexpense:a.packingexpense,minprice:a.minprice,date:JSON.parse(a.date),shopAvatar:a.shopAvatar,businessLicenseImg:a.businessLicenseImg,cateringServiceLicenseImg:a.cateringServiceLicenseImg,tableData:JSON.parse(a.tableData)};case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.getShopInfo()}},m=u,p=(a("c839"),a("2877")),d=Object(p["a"])(m,r,s,!1,null,null,null);t["default"]=d.exports},"65f0":function(e,t,a){var r=a("861d"),s=a("e8b5"),i=a("b622"),o=i("species");e.exports=function(e,t){var a;return s(e)&&(a=e.constructor,"function"!=typeof a||a!==Array&&!s(a.prototype)?r(a)&&(a=a[o],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===t?0:t)}},8418:function(e,t,a){"use strict";var r=a("c04e"),s=a("9bf2"),i=a("5c6c");e.exports=function(e,t,a){var o=r(t);o in e?s.f(e,o,i(0,a)):e[o]=a}},a434:function(e,t,a){"use strict";var r=a("23e7"),s=a("23cb"),i=a("a691"),o=a("50c4"),l=a("7b0b"),n=a("65f0"),c=a("8418"),u=a("1dde"),m=Math.max,p=Math.min,d=9007199254740991,f="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!u("splice")},{splice:function(e,t){var a,r,u,h,b,g,v=l(this),y=o(v.length),w=s(e,y),x=arguments.length;if(0===x?a=r=0:1===x?(a=0,r=y-w):(a=x-2,r=p(m(i(t),0),y-w)),y+a-r>d)throw TypeError(f);for(u=n(v,r),h=0;h<r;h++)b=w+h,b in v&&c(u,h,v[b]);if(u.length=r,a<r){for(h=w;h<y-r;h++)b=h+r,g=h+a,b in v?v[g]=v[b]:delete v[g];for(h=y;h>y-r+a;h--)delete v[h-1]}else if(a>r)for(h=y-r;h>w;h--)b=h+r-1,g=h+a-1,b in v?v[g]=v[b]:delete v[g];for(h=0;h<a;h++)v[h+w]=arguments[h+2];return v.length=y-r+a,u}})},b0c0:function(e,t,a){var r=a("83ab"),s=a("9bf2").f,i=Function.prototype,o=i.toString,l=/^\s*function ([^ (]*)/,n="name";!r||n in i||s(i,n,{configurable:!0,get:function(){try{return o.call(this).match(l)[1]}catch(e){return""}}})},b55d:function(e,t,a){},c839:function(e,t,a){"use strict";var r=a("b55d"),s=a.n(r);s.a},e8b5:function(e,t,a){var r=a("c6b6");e.exports=Array.isArray||function(e){return"Array"==r(e)}}}]);
//# sourceMappingURL=chunk-c08de40e.0da971e4.js.map