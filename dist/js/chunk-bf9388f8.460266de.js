(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bf9388f8"],{"1dde":function(o,e,t){var r=t("d039"),a=t("b622"),s=a("species");o.exports=function(o){return!r((function(){var e=[],t=e.constructor={};return t[s]=function(){return{foo:1}},1!==e[o](Boolean).foo}))}},"2ec4":function(o,e,t){"use strict";var r=t("a693"),a=t.n(r);a.a},"4d8b":function(o,e,t){"use strict";t.r(e);var r=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"goodslist"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[o._v("添加商品")])]),t("el-form",{ref:"goodsForm",attrs:{model:o.goodsForm,"label-width":"80px",rules:o.rules}},[t("el-form-item",{attrs:{label:"商品名称",prop:"goodsname"}},[t("el-input",{model:{value:o.goodsForm.goodsname,callback:function(e){o.$set(o.goodsForm,"goodsname",e)},expression:"goodsForm.goodsname"}})],1),t("el-form-item",{attrs:{label:"商品分类",prop:"goodscategory"}},[t("el-select",{attrs:{placeholder:"请选择商品分类"},model:{value:o.goodsForm.goodscategory,callback:function(e){o.$set(o.goodsForm,"goodscategory",e)},expression:"goodsForm.goodscategory"}},[t("el-option",{attrs:{label:"促销",value:"促销"}}),t("el-option",{attrs:{label:"咖啡",value:"咖啡"}}),t("el-option",{attrs:{label:"热菜",value:"热菜"}}),t("el-option",{attrs:{label:"凉菜",value:"凉菜"}}),t("el-option",{attrs:{label:"饮品",value:"饮品"}}),t("el-option",{attrs:{label:"火锅",value:"火锅"}})],1)],1),t("el-form-item",{attrs:{label:"商品特色",prop:"goodsfeature"}},[t("el-checkbox-group",{model:{value:o.goodsForm.goodsfeature,callback:function(e){o.$set(o.goodsForm,"goodsfeature",e)},expression:"goodsForm.goodsfeature"}},[t("el-checkbox",{attrs:{label:"新品上市",name:"type"}}),t("el-checkbox",{attrs:{label:"第二单半价",name:"type"}}),t("el-checkbox",{attrs:{label:"主打产品",name:"type"}}),t("el-checkbox",{attrs:{label:"火爆产品",name:"type"}}),t("el-checkbox",{attrs:{label:"祖传手艺",name:"type"}}),t("el-checkbox",{attrs:{label:"源自四川",name:"type"}})],1)],1),t("el-form-item",{attrs:{label:"商品图片"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:o.imgApi,"show-file-list":!1,"on-success":o.handleAvatarSuccess,"before-upload":o.beforeAvatarUpload}},[o.goodsForm.imgUrl?t("img",{staticClass:"avatar",attrs:{src:o.getImgApi+o.goodsForm.imgUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t("el-form-item",{attrs:{label:"是否促销",prop:"isPromotion"}},[t("el-radio-group",{model:{value:o.goodsForm.isPromotion,callback:function(e){o.$set(o.goodsForm,"isPromotion",e)},expression:"goodsForm.isPromotion"}},[t("el-radio",{attrs:{label:"促销"}}),t("el-radio",{attrs:{label:"不促销"}})],1)],1),t("el-form-item",{attrs:{label:"食品规格",prop:"goodsstandard"}},[t("el-radio-group",{model:{value:o.goodsForm.goodsstandard,callback:function(e){o.$set(o.goodsForm,"goodsstandard",e)},expression:"goodsForm.goodsstandard"}},[t("el-radio",{attrs:{label:"单规格"},nativeOn:{click:function(e){o.isShow=!1}}},[o._v("单规格")]),t("el-radio",{attrs:{label:"多规格"},nativeOn:{click:function(e){o.isShow=!0}}},[o._v("多规格")])],1)],1),o.isShow?o._e():t("el-form-item",{attrs:{label:"包装费"}},[t("el-input-number",{attrs:{type:"small",min:1,label:"包装费"},model:{value:o.goodsForm.packingexpense,callback:function(e){o.$set(o.goodsForm,"packingexpense",e)},expression:"goodsForm.packingexpense"}})],1),o.isShow?t("div",{attrs:{id:"formTable"}},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:o.addMoreStandard}},[o._v("添加规格")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:o.goodsForm.standardTableData}},[t("el-table-column",{attrs:{prop:"goodsstandard",label:"规格"}}),t("el-table-column",{attrs:{prop:"packingexpense",label:"包装费"}}),t("el-table-column",{attrs:{prop:"goodsPrice",label:"价格"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:o._u([{key:"default",fn:function(e){return[t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return o.handleDelete(e.$index,e.row)}}},[o._v("删除")])]}}])})],1)],1):t("el-form-item",{attrs:{label:"价格"}},[t("el-input-number",{attrs:{type:"small",min:20,label:"价格"},model:{value:o.goodsForm.goodsPrice,callback:function(e){o.$set(o.goodsForm,"goodsPrice",e)},expression:"goodsForm.goodsPrice"}})],1),t("el-form-item",{attrs:{label:"商品描述",prop:"goodsdesc"}},[t("el-input",{attrs:{type:"textarea"},model:{value:o.goodsForm.goodsdesc,callback:function(e){o.$set(o.goodsForm,"goodsdesc",e)},expression:"goodsForm.goodsdesc"}})],1),t("el-dialog",{attrs:{title:"添加规格",visible:o.dialogFormVisible,width:"35%"},on:{"update:visible":function(e){o.dialogFormVisible=e}}},[t("el-form",{staticStyle:{width:"100%"},attrs:{model:o.modelForm,size:"small","label-width":"60px"}},[t("el-form-item",{attrs:{label:"规格"}},[t("el-input",{model:{value:o.modelForm.goodsstandard,callback:function(e){o.$set(o.modelForm,"goodsstandard",e)},expression:"modelForm.goodsstandard"}})],1),t("el-form-item",{attrs:{label:"包装费"}},[t("el-input-number",{attrs:{type:"small",min:1,label:"包装费"},model:{value:o.modelForm.packingexpense,callback:function(e){o.$set(o.modelForm,"packingexpense",e)},expression:"modelForm.packingexpense"}})],1),t("el-form-item",{attrs:{label:"价格"}},[t("el-input-number",{attrs:{type:"small",min:20,label:"价格"},model:{value:o.modelForm.goodsPrice,callback:function(e){o.$set(o.modelForm,"goodsPrice",e)},expression:"modelForm.goodsPrice"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:function(e){o.dialogFormVisible=!1}}},[o._v("取 消")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:o.confirmModel}},[o._v("确 定")])],1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:o.onSubmit}},[o._v("立即添加")]),t("el-button",{on:{click:o.cancel}},[o._v("取消")])],1)],1)],1)],1)},a=[],s=(t("a434"),t("96cf"),t("89ba")),l=t("c40e"),n={data:function(){return{imgApi:"http://127.0.0.1:3000/goods/upload/",getImgApi:"http://127.0.0.1:3000/upload/goods/",goodsForm:{goodsname:"",goodscategory:"",goodsfeature:[],imgUrl:"",isPromotion:"",goodsstandard:"单规格",packingexpense:5,goodsPrice:20,standardTableData:[{goodsstandard:"默认",packingexpense:5,goodsPrice:20}],goodsdesc:""},isShow:!1,rules:{goodsname:[{required:!0,message:"请输入商品名称",trigger:"blur"}],goodscategory:[{required:!0,message:"请输入商品分类",trigger:"change"}],goodsfeature:[{required:!0,message:"请选择至少1个商品特色",trigger:"change"}],isPromotion:[{required:!0,message:"请选择是否促销",trigger:"change"}],goodsstandard:[{required:!0,message:"请选择食品规格",trigger:"change"}]},dialogFormVisible:!1,modelForm:{goodsstandard:"",packingexpense:0,goodsPrice:20}}},methods:{handleAvatarSuccess:function(o,e){this.goodsForm.imgUrl=o.imgUrl},beforeAvatarUpload:function(o){var e="image/png"===o.type,t="image/jpeg"===o.type,r=o.size/1024/1024<2;return t||e||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),(e||t)&&r},handleDelete:function(o,e){console.log(o,e),this.goodsForm.standardTableData.splice(o,1)},addMoreStandard:function(){this.dialogFormVisible=!0},confirmModel:function(){this.dialogFormVisible=!1;var o=this.modelForm,e=o.goodsstandard,t=o.packingexpense,r=o.goodsPrice;this.goodsForm.standardTableData.unshift({goodsstandard:e,packingexpense:t,goodsPrice:r}),console.log("modelForm",this.goodsForm.standardTableData),this.modelForm={goodsstandard:"",packingexpense:0,goodsPrice:20}},onSubmit:function(){var o=this;this.$refs.goodsForm.validate(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,a,s,n,i,d,c,g,m,u,p,f,b,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=12;break}return r=o.goodsForm,a=r.goodsname,s=r.goodscategory,n=r.goodsfeature,i=r.imgUrl,d=r.isPromotion,c=r.goodsdesc,g=r.goodsstandard,m=r.packingexpense,u=r.goodsPrice,p=r.standardTableData,f={goodsname:a,goodscategory:s,goodsfeature:JSON.stringify(n),imgUrl:i,isPromotion:d,goodsdesc:c,standard:"单规格"===g?JSON.stringify([{goodsstandard:g,packingexpense:m,goodsPrice:u}]):JSON.stringify(p)},e.next=5,Object(l["a"])(f);case 5:b=e.sent,v=b.code,b.msg,0===v&&o.$router.push("/home/goodslist"),console.log("obj",v),e.next=14;break;case 12:return console.log("error submit!!"),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e)})));return function(o){return e.apply(this,arguments)}}())},cancel:function(){this.goodsForm={goodsname:"",goodscategory:"",goodsfeature:[],imgUrl:"",isPromotion:"",goodsstandard:"单规格",packingexpense:5,goodsPrice:20,standardTableData:[{goodsstandard:"默认",packingexpense:5,goodsPrice:20}],goodsdesc:""}}}},i=n,d=(t("2ec4"),t("2877")),c=Object(d["a"])(i,r,a,!1,null,null,null);e["default"]=c.exports},"65f0":function(o,e,t){var r=t("861d"),a=t("e8b5"),s=t("b622"),l=s("species");o.exports=function(o,e){var t;return a(o)&&(t=o.constructor,"function"!=typeof t||t!==Array&&!a(t.prototype)?r(t)&&(t=t[l],null===t&&(t=void 0)):t=void 0),new(void 0===t?Array:t)(0===e?0:e)}},8418:function(o,e,t){"use strict";var r=t("c04e"),a=t("9bf2"),s=t("5c6c");o.exports=function(o,e,t){var l=r(e);l in o?a.f(o,l,s(0,t)):o[l]=t}},a434:function(o,e,t){"use strict";var r=t("23e7"),a=t("23cb"),s=t("a691"),l=t("50c4"),n=t("7b0b"),i=t("65f0"),d=t("8418"),c=t("1dde"),g=Math.max,m=Math.min,u=9007199254740991,p="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!c("splice")},{splice:function(o,e){var t,r,c,f,b,v,h=n(this),F=l(h.length),x=a(o,F),k=arguments.length;if(0===k?t=r=0:1===k?(t=0,r=F-x):(t=k-2,r=m(g(s(e),0),F-x)),F+t-r>u)throw TypeError(p);for(c=i(h,r),f=0;f<r;f++)b=x+f,b in h&&d(c,f,h[b]);if(c.length=r,t<r){for(f=x;f<F-r;f++)b=f+r,v=f+t,b in h?h[v]=h[b]:delete h[v];for(f=F;f>F-r+t;f--)delete h[f-1]}else if(t>r)for(f=F-r;f>x;f--)b=f+r-1,v=f+t-1,b in h?h[v]=h[b]:delete h[v];for(f=0;f<t;f++)h[f+x]=arguments[f+2];return h.length=F-r+t,c}})},a693:function(o,e,t){},c40e:function(o,e,t){"use strict";t.d(e,"a",(function(){return a})),t.d(e,"d",(function(){return s})),t.d(e,"c",(function(){return l})),t.d(e,"b",(function(){return n}));var r=t("b775"),a=function(o){return r["a"].post("/goods/goodsadd",o)},s=function(o){return r["a"].get("/goods/goodslist",o)},l=function(o){return r["a"].post("/goods/goodsedit",o)},n=function(o){return r["a"].get("/goods/goodsdel",o)}},e8b5:function(o,e,t){var r=t("c6b6");o.exports=Array.isArray||function(o){return"Array"==r(o)}}}]);
//# sourceMappingURL=chunk-bf9388f8.460266de.js.map